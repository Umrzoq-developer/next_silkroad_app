import { NextPage } from "next";
import Head from "next/head";
import React from "react";
import Users from "@/view_components/dashboard/Users";
import Layout from "@/layout";
import { initializeApollo } from "@/config/apollo_client";
import { usersQuery } from "@/graphql/user";

const Dashboard: NextPage = (props) => {
  console.log(props?.initialApolloState, "props");
  return (
    <div>
      <Head>
        <title>Login Page</title>
        <meta name="description" content="Generated by create next app" />
      </Head>

      <Layout>
        <main>
          <h3>Main Page</h3>
          <Users />
        </main>
      </Layout>
    </div>
  );
};

export async function getStaticProps() {
  const apolloClient = initializeApollo();

  const data = await apolloClient.query({
    query: usersQuery,
  });

  console.log(data, "data");
  return {
    props: {
      initialApolloState: apolloClient.cache.extract(),
    },
    revalidate: 1,
  };
}

export default Dashboard;
